<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="assert/plugins/css/bootstrap.min.css">
  <!--<link rel="stylesheet" href="assert/plugins/css/animate.min.css">-->
  <link rel="stylesheet" href="assert/css/myWeather.css">
  <!--<script src="node_modules/vue/dist/vue.min.js"></script>-->
  <title>测试</title>
  <noscript>
    <p>这个浏览器不让用javascript，高级设置开一下</p>
  </noscript>

</head>
<body>

<!--上面-->
<div class="tq-banner">
  <p class="main">晴天</p>
  <p class="location">天津</p>
  <p class="temp">28°</p>
</div>
<!--下面-->
<div class="tq-list">
  <span class="active-point"></span>
  <ul>

  </ul>
</div>


<script src="assert/plugins/js/jquery-1.12.4.min.js"></script>
<!--<script src="assert/plugins/js/zeptp.js"></script>-->
<!--<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>-->
<!--<script src="assert/js/wow.min.js"></script>-->
<script>

  ;(function () {

    var $tq_list=$('.tq-list ul')
    
    
    function setActivePoint() {
      var $li = $('.tq-list li').eq(0)


      $('.active-point').css({
        left: $li.offset().left - 20,
        top: $li.offset().top - $li.offsetParent().offset().top + ($li.outerHeight() / 2)+5
      }).show(1000)

    }


    function setWeatherList(data) {

      var tt = data['HeWeather5'][0]['daily_forecast']

      var days=['今天','明天','后天']

      tt.forEach(function (item,index) {

        var liTemp=$('<li><div class="list-week">\n' +
          '        <span class="">'+days[index]+'</span>\n' +
          '      </div>\n' +
          '      <div class="list-temp">\n' +
          '        <span class="nums">'+item['tmp']['min']+'~'+item['tmp']['max']+'°</span>\n' +
          '        <span class="tianqi">'+item['cond']['txt_n']+'</span>\n' +
          '      </div></li>')

        $tq_list.append(liTemp)



      })

      $tq_list.slideDown(600)

    }


    function getWeatherData() {

      $.ajax({
        url: 'https://free-api.heweather.com/v5/forecast?city=tianjin&key=b7e13790348846feb206d08509a1d78b',
        type: 'get',
        dataType: 'json',
        data: {},
        success: function (data) {
          setWeatherList(data)
          setActivePoint()
        },
        error: function (data) {
          console.log('error')
          console.log(data)
        }
      })
    }


    getWeatherData()

  }())


</script>
</body>
</html>